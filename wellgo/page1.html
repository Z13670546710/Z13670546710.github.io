<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <title>HOME</title>
</head>
<body>
    <div class="Width448">
        
    <div class="main ">
            <div class="main_t">
                <h2>早上好，用户</h2>
                <p>小步前进，持之以恒</p>
            </div>
            <div class="page_Cart1">
                <div class="page_Cart_t">
                    <h2>今日进度</h2>
                    <p>连续3天</p>
                </div>
                <div class="page_Cart_c">
                    <div class="page_Cart_c_t">
                        <div class="page_Cart_c_t_l">1/4 完成</div>
                        <div class="page_Cart_c_t_r">25%</div>
                    </div>
                    <div class="page_Cart_c_b">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                </div>
                <ul class="page_Cart_b">
                    <li><span>周</span></li>
                    <li><span>周</span></li>
                    <li><span>周</span></li>
                    <li><span>周</span></li>
                    <li><span>周</span></li>
                    <li class="hover"><span>周</span></li>
                    <li class="hover"><span>周</span></li>
                </ul>
            </div>
            <ul class="page_Cart2">
                <li>
                    <a href="./page2.html"><div class="imgList">
                            <img src="./images/i1.png" alt="">
                            </div>
                            <p>目标拆解</p></a>
                </li>
                <li>
                    <a href="./page3.html">
                        <div class="imgList">
                                <img src="./images/i2.png" alt="">
                        </div>
                        <p>放松建议</p></a>
                    </li>
            </ul>
            <div class="page_Cart3">
                <div class="page_Cart3_t">
                    <h2>今日计划</h2>
                    <ul>
                        <li class="hover">全部</li>
                        <li>学习</li>
                        <li>放松</li>
                    </ul>
                </div>
                <div class="task-list">
                        <div class="task-item" style="border: 1px solid #cdecea;">
                            <div class="task-checkbox">
                                <input type="checkbox">
                            </div>
                            <div class="task-content">
                                <div class="task-title">完成英语听力练习</div>
                                <div class="task-time">
                                    09:00
                                </div>
                            </div>
                        </div>
                        
                        <div class="task-item" style="border: 1px solid #cdecea;">
                            <div class="task-checkbox">
                                <input type="checkbox">
                            </div>
                            <div class="task-content">
                                <div class="task-title">阅读20页《思考，快与慢》</div>
                                <div class="task-time">
                                    14:00
                                </div>
                            </div>
                        </div>
                        
                        <div class="task-item" >
                            <div class="task-checkbox">
                                <input type="checkbox">
                            </div>
                            <div class="task-content">
                                <div class="task-title">15分钟冥想</div>
                                <div class="task-time">
                                    19:30
                                </div>
                            </div>
                        </div>
                        
                        <div class="task-item">
                            <div class="task-checkbox">
                                <input type="checkbox">
                            </div>
                            <div class="task-content">
                                <div class="task-title">散步30分钟</div>
                                <div class="task-time">
                                </div>
                            </div>
                        </div>
                    <div class="addBtn">
                        添加新任务
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="mask_M">
        <h2>任务完成！</h2>
        <p>你获得了10积分！</p>
    </div>
    <footer>
        <ul>
            <li class="hover">
                <a href="./page1.html">
                    <i class="fas fa-home"></i> 
                <p>首页</p></a>
            </li>
            <li>
                <a href="./page2.html">
                    <i class="fas fa-book"></i>
                    <p>学习</p></a>
                </li>
                <li>
                    <a href="./page3.html">
                        <i class="fas fa-coffee"></i>
                        <p>放松</p></a>
                    </li>
                    <li>
                        <a href="./page4.html">
                            <i class="fas fa-gift"></i> 
                            <p>奖励</p></a>
                        </li>
        </ul>
    </footer>
    <script>
            document.addEventListener('DOMContentLoaded', function() {
                // 获取所有任务复选框
                const taskCheckboxes = document.querySelectorAll('.task-checkbox input[type="checkbox"]');
                
                // 获取任务完成提示元素
                const maskM = document.querySelector('.mask_M');
                
                // 为每个复选框添加事件监听器
                taskCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        // 找到最近的.task-item父元素
                        const taskItem = this.closest('.task-item');
                        
                        if (this.checked) {
                            // 添加checked类
                            taskItem.classList.add('checked');
                            // 添加完成动画
                            taskItem.classList.add('task-complete');
                            
                            // 显示任务完成提示
                            maskM.style.display = 'block';
                            
                            // 2.5秒后隐藏提示
                            setTimeout(() => {
                                maskM.style.display = 'none';
                            }, 2500);
                            
                            // 更新进度条
                            updateProgressBar();
                        } else {
                            // 移除checked类
                            taskItem.classList.remove('checked');
                            // 移除完成动画
                            taskItem.classList.remove('task-complete');
                            
                            // 更新进度条
                            updateProgressBar();
                        }
                        
                        // 移除动画类，以便下次可以再次触发
                        setTimeout(() => {
                            taskItem.classList.remove('task-complete');
                        }, 800);
                    });
                });
                
                // 添加新任务按钮事件
                const addBtn = document.querySelector('.addBtn');
                addBtn.addEventListener('click', function() {
                    const newTask = document.createElement('div');
                    newTask.className = 'task-item';
                    newTask.innerHTML = `
                        <div class="task-checkbox">
                            <input type="checkbox">
                        </div>
                        <div class="task-content">
                            <div class="task-title">新任务</div>
                            <div class="task-time">未设置</div>
                        </div>
                    `;
                    
                    // 将新任务插入到任务列表的末尾（在添加按钮之前）
                    this.parentNode.insertBefore(newTask, this);
                    
                    // 为新任务的复选框添加事件监听器
                    newTask.querySelector('input[type="checkbox"]').addEventListener('change', function() {
                        const taskItem = this.closest('.task-item');
                        if (this.checked) {
                            taskItem.classList.add('checked');
                            taskItem.classList.add('task-complete');
                            
                            maskM.style.display = 'block';
                            setTimeout(() => {
                                maskM.style.display = 'none';
                            }, 2500);
                            
                            updateProgressBar();
                        } else {
                            taskItem.classList.remove('checked');
                            taskItem.classList.remove('task-complete');
                            updateProgressBar();
                        }
                        
                        setTimeout(() => {
                            taskItem.classList.remove('task-complete');
                        }, 800);
                    });
                });
                
                // 更新进度条函数
                function updateProgressBar() {
                    const totalTasks = document.querySelectorAll('.task-item').length;
                    const completedTasks = document.querySelectorAll('.task-item.checked').length;
                    const progressPercentage = (completedTasks / totalTasks) * 100;
                    
                    // 更新进度条宽度
                    document.querySelector('.progress-fill').style.width = `${progressPercentage}%`;
                    
                    // 更新进度文本
                    document.querySelector('.page_Cart_c_t_l').textContent = `${completedTasks}/${totalTasks} 完成`;
                    document.querySelector('.page_Cart_c_t_r').textContent = `${Math.round(progressPercentage)}%`;
                }
            });
        </script>
</body>
</html>